{
    "variables": [
        {
            "type": "property",
            "property": "period",
            "inputType": "select",
            "id": "period",
            "label": "period",
            "defaultValue": "1",
            "visible": true,
            "values": [
                {
                    "value": "60",
                    "label": "1min"
                },
                {
                    "value": "180",
                    "label": "3min"
                },
                {
                    "value": "300",
                    "label": "5min"
                },
                {
                    "value": "600",
                    "label": "10min"
                }
            ]
        }
    ],
    "widgets": [
        {
            "height": 8,
            "width": 10,
            "y": 30,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "APIInfrastructureStack-APIFargateServiceAlbService1982B8ED-lHbszm7GZIg5", "ClusterName", "APIInfrastructureStack-APICluster381F6E68-v0y03IsPXhdE", { "color": "#1f77b4", "region": "us-west-1", "label": "CPU max", "stat": "Maximum" } ],
                    [ "...", { "region": "us-west-1", "color": "#aec7e8", "label": "CPU avg" } ],
                    [ ".", "MemoryUtilization", ".", ".", ".", ".", { "yAxis": "right", "color": "#2ca02c", "region": "us-west-1", "label": "MEM max", "stat": "Maximum" } ],
                    [ "...", { "yAxis": "right", "region": "us-west-1", "color": "#98df8a", "label": "MEM avg" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "API Server",
                "period": 300,
                "stat": "Average"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 128,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "APIServiceInfrastructureStack-APIServiceFargateServiceB310B9BA-UVQnWS50I0Bk", "ClusterName", "APIServiceInfrastructureStack-APIServiceCluster4614AF9B-RH7YLj5zWBvG", { "color": "#1f77b4", "region": "us-west-1" } ],
                    [ "...", { "stat": "Average", "region": "us-west-1", "color": "#aec7e8" } ],
                    [ ".", "MemoryUtilization", ".", ".", ".", ".", { "yAxis": "right", "color": "#2ca02c", "region": "us-west-1" } ],
                    [ "...", { "yAxis": "right", "stat": "Average", "region": "us-west-1", "color": "#98df8a" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "API Internal",
                "stat": "Maximum",
                "period": 300
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 48,
            "x": 6,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "CPUUtilization", "DBClusterIdentifier", "api-cluster", { "yAxis": "left", "region": "us-west-1", "id": "m1", "stat": "Maximum" } ],
                    [ "...", { "region": "us-west-1", "color": "#aec7e8" } ],
                    [ ".", "FreeableMemory", ".", ".", { "yAxis": "right", "stat": "Maximum", "region": "us-west-1" } ],
                    [ "...", { "region": "us-west-1", "color": "#98df8a", "yAxis": "right" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "API DB - CPU/Memory",
                "annotations": {
                    "horizontal": [
                        {
                            "visible": false,
                            "label": "cpu alarm",
                            "value": 90
                        },
                        {
                            "visible": false,
                            "label": "mem alarm",
                            "value": 0.15,
                            "yAxis": "right"
                        }
                    ]
                },
                "liveData": false
            }
        },
        {
            "height": 9,
            "width": 12,
            "y": 149,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Lambda", "Invocations", "FunctionName", "APIInfrastructureStack-LogRetentionaae0aa3c5b4d4f8-VRsrETAUdpuk" ],
                    [ "...", "APIServiceGenerateKeyLambda" ],
                    [ "...", "APIServiceRevokeKeyLambda" ],
                    [ "...", "APIServiceStripeLambdaLambda" ],
                    [ "...", "AppointmentPollingAthenaCatchUpLambda" ],
                    [ "...", "AppointmentPollingAthenaLambda" ],
                    [ "...", "BulkUrlSigningLambda" ],
                    [ "...", "CCDAOpenSearchLambda" ],
                    [ "...", "CdaToVisualizationLambda_v2" ],
                    [ "...", "CommonWellDocContributionLambda" ],
                    [ "...", "DocumentDownloaderLambda_v2" ],
                    [ "...", "DocumentUploaderLambda" ],
                    [ "...", "EhrJwtAuthAthenaLambda" ],
                    [ "...", "EhrOauth2AuthAthenaLambda" ],
                    [ "...", "FHIRConverter2Lambda" ],
                    [ "...", "FhirToBundleLambda" ],
                    [ "...", "FhirToCdaConverterLambda" ],
                    [ "...", "FhirToMedicalRecordLambda" ],
                    [ "...", "IHEGatewayV2OutboundDocumentQueryLambda" ],
                    [ "...", "IHEGatewayV2OutboundDocumentRetrievalLambda" ],
                    [ "...", "IHEGatewayV2OutboundPatientDiscoveryLambda" ],
                    [ "...", "IHEInboundDocumentQueryV2Lambda" ],
                    [ "...", "IHEInboundDocumentRetrievalV2Lambda" ],
                    [ "...", "IHEInboundPatientDiscoveryV2Lambda" ],
                    [ "...", "JwtAuthLambda" ],
                    [ "...", "PollOutboundDocumentQueryLambda" ],
                    [ "...", "PollOutboundDocumentRetrievalLambda" ],
                    [ "...", "PollOutboundPatientDiscoveryLambda" ],
                    [ "...", "PropelAuthWebhookLambdaLambda" ],
                    [ "...", "ScheduledAPIQuotaCheckerLambda" ],
                    [ "...", "ScheduledCqDirectoryRebuilderLambda" ],
                    [ "...", "ScheduledDBMaintenanceLambda" ],
                    [ "...", "ScheduledDocumentQueryCheckerLambda" ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Lambdas Invocations",
                "stat": "Sum",
                "period": 300
            }
        },
        {
            "height": 9,
            "width": 12,
            "y": 158,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Lambda", "Errors", "FunctionName", "APIInfrastructureStack-LogRetentionaae0aa3c5b4d4f8-VRsrETAUdpuk" ],
                    [ "...", "APIServiceGenerateKeyLambda" ],
                    [ "...", "APIServiceRevokeKeyLambda" ],
                    [ "...", "APIServiceStripeLambdaLambda" ],
                    [ "...", "AppointmentPollingAthenaCatchUpLambda" ],
                    [ "...", "AppointmentPollingAthenaLambda" ],
                    [ "...", "BulkUrlSigningLambda" ],
                    [ "...", "CCDAOpenSearchLambda" ],
                    [ "...", "CdaToVisualizationLambda_v2" ],
                    [ "...", "CommonWellDocContributionLambda" ],
                    [ "...", "DocumentDownloaderLambda_v2" ],
                    [ "...", "DocumentUploaderLambda" ],
                    [ "...", "EhrJwtAuthAthenaLambda" ],
                    [ "...", "EhrOauth2AuthAthenaLambda" ],
                    [ "...", "FHIRConverter2Lambda" ],
                    [ "...", "FHIRServerLambda" ],
                    [ "...", "FhirToBundleLambda" ],
                    [ "...", "FhirToCdaConverterLambda" ],
                    [ "...", "FhirToMedicalRecordLambda" ],
                    [ "...", "IHEGatewayV2OutboundDocumentQueryLambda" ],
                    [ "...", "IHEGatewayV2OutboundDocumentRetrievalLambda" ],
                    [ "...", "IHEGatewayV2OutboundPatientDiscoveryLambda" ],
                    [ "...", "IHEInboundDocumentQueryV2Lambda" ],
                    [ "...", "IHEInboundDocumentRetrievalV2Lambda" ],
                    [ "...", "IHEInboundPatientDiscoveryV2Lambda" ],
                    [ "...", "JwtAuthLambda" ],
                    [ "...", "PollOutboundDocumentQueryLambda" ],
                    [ "...", "PollOutboundDocumentRetrievalLambda" ],
                    [ "...", "PollOutboundPatientDiscoveryLambda" ],
                    [ "...", "PropelAuthWebhookLambdaLambda" ],
                    [ "...", "ScheduledAPIQuotaCheckerLambda" ],
                    [ "...", "ScheduledCqDirectoryRebuilderLambda" ],
                    [ "...", "ScheduledDBMaintenanceLambda" ],
                    [ "...", "ScheduledDocumentQueryCheckerLambda" ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Lambdas Errors",
                "stat": "Sum",
                "period": 300
            }
        },
        {
            "height": 9,
            "width": 12,
            "y": 169,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ApiGateway", "Count", "ApiName", "api", { "stat": "SampleCount", "region": "us-west-1" } ],
                    [ ".", "4XXError", ".", ".", { "region": "us-west-1", "yAxis": "right" } ],
                    [ ".", "5XXError", ".", ".", { "region": "us-west-1", "yAxis": "right", "color": "#d62728" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Sum",
                "period": 300,
                "title": "API Gateway - Requests vs. Responses"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 66,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "FHIRServerStack-FHIRServerFargateService46BCF377-gXh9molzfoo4", "ClusterName", "FHIRServerStack-FHIRServerClusterC4EE8AC0-00Vo19v9bvc5", { "color": "#1f77b4", "region": "us-west-1" } ],
                    [ "...", { "stat": "Average", "region": "us-west-1", "color": "#aec7e8" } ],
                    [ ".", "MemoryUtilization", ".", ".", ".", ".", { "yAxis": "right", "color": "#2ca02c", "region": "us-west-1" } ],
                    [ "...", { "yAxis": "right", "stat": "Average", "region": "us-west-1", "color": "#98df8a" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "FHIR Server",
                "stat": "Maximum",
                "period": 300
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 128,
            "x": 14,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "CPUUtilization", "Role", "WRITER", "DBClusterIdentifier", "api-service-cluster", { "stat": "Maximum", "region": "us-west-1" } ],
                    [ "...", { "color": "#aec7e8", "region": "us-west-1" } ],
                    [ ".", "ReadLatency", ".", ".", ".", ".", { "yAxis": "right", "region": "us-west-1" } ],
                    [ ".", "WriteLatency", ".", ".", ".", ".", { "yAxis": "right", "region": "us-west-1" } ],
                    [ ".", "CommitLatency", ".", ".", ".", ".", { "yAxis": "right", "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "Internal DB - RDS Writer instance"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 0,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# Product\n",
                "background": "solid"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 108,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# OpenSearch\n",
                "background": "solid"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 64,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# FHIR Server\n",
                "background": "solid"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 82,
            "x": 14,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "CPUUtilization", "DBClusterIdentifier", "fhir-server", { "yAxis": "left", "region": "us-west-1", "id": "m1", "stat": "Maximum" } ],
                    [ "...", { "region": "us-west-1", "color": "#aec7e8" } ],
                    [ ".", "FreeableMemory", ".", ".", { "yAxis": "right", "stat": "Maximum", "region": "us-west-1" } ],
                    [ "...", { "region": "us-west-1", "color": "#98df8a", "yAxis": "right" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "FHIR DB - RDS"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 136,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# SQS\n",
                "background": "solid"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 56,
            "x": 6,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "ReadLatency", "DBClusterIdentifier", "api-cluster", { "yAxis": "left", "region": "us-west-1" } ],
                    [ ".", "CommitLatency", ".", ".", { "yAxis": "right", "region": "us-west-1" } ],
                    [ ".", "WriteLatency", ".", ".", { "yAxis": "right", "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "API DB - Latency",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "color": "#1f77b4",
                            "label": "1 second",
                            "value": 1
                        },
                        {
                            "label": "1 second",
                            "value": 1,
                            "yAxis": "right"
                        }
                    ]
                }
            }
        },
        {
            "height": 8,
            "width": 8,
            "y": 48,
            "x": 16,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "VolumeReadIOPs", "DBClusterIdentifier", "api-cluster", { "id": "m2", "label": "VolumeReadIOPs", "region": "us-west-1" } ],
                    [ ".", "VolumeWriteIOPs", ".", ".", { "yAxis": "right", "id": "m1", "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Maximum",
                "period": 300,
                "title": "API DB - IOPS",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "label": "VolumeReadIOPs >= 1_200_000 for 1 datapoints within 5 minutes",
                            "value": 1200000
                        },
                        {
                            "label": "VolumeWriteIOPs >= 600_000 for 1 datapoints within 5 minutes",
                            "value": 600000,
                            "yAxis": "right"
                        }
                    ]
                },
                "yAxis": {
                    "right": {
                        "label": ""
                    },
                    "left": {
                        "label": ""
                    }
                }
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 90,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# FHIR Converter\n",
                "background": "solid"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 92,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "APIInfrastructureStack-FHIRConverterFargateService8CA04E0D-eZf2v9mn6vvJ", "ClusterName", "APIInfrastructureStack-FHIRConverterCluster3ED284AD-6lmkKWgYr3oi", { "color": "#1f77b4", "region": "us-west-1" } ],
                    [ "...", { "stat": "Average", "region": "us-west-1", "color": "#aec7e8" } ],
                    [ ".", "MemoryUtilization", ".", ".", ".", ".", { "yAxis": "right", "color": "#2ca02c", "region": "us-west-1" } ],
                    [ "...", { "yAxis": "right", "stat": "Average", "region": "us-west-1", "color": "#98df8a" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "FHIR Converter",
                "stat": "Maximum",
                "period": 60
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 74,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "VolumeReadIOPs", "DBClusterIdentifier", "fhir-server", { "region": "us-west-1", "id": "m1", "label": "VolumeReadIOPs-Billable" } ],
                    [ ".", "VolumeWriteIOPs", ".", ".", { "yAxis": "right", "region": "us-west-1", "id": "m2" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Maximum",
                "period": 300,
                "title": "FHIR DB - IOPS",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "label": "VolumeWriteIOPs >= 2_500_000 for 1 datapoints within 5min",
                            "value": 2500000,
                            "yAxis": "right"
                        },
                        {
                            "label": "VolumeReadIOPs >= 2_500_000 for 1 datapoints within 5min",
                            "value": 2500000
                        }
                    ]
                }
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 82,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "ReadLatency", "DBClusterIdentifier", "fhir-server", { "yAxis": "left", "region": "us-west-1" } ],
                    [ ".", "CommitLatency", "DBInstanceIdentifier", "fhir-serverinstance1", { "yAxis": "right" } ],
                    [ ".", "WriteLatency", "DBClusterIdentifier", "fhir-server", { "yAxis": "right", "region": "us-west-1" } ],
                    [ ".", "CommitLatency", "DBInstanceIdentifier", "fhir-serverinstance2", { "yAxis": "right" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "FHIR DB - Latency",
                "liveData": false,
                "yAxis": {
                    "right": {
                        "label": "millis",
                        "showUnits": false
                    }
                }
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 66,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "FHIRServerStack-FHIRServerFargateService46BCF377-gXh9molzfoo4", "ClusterName", "FHIRServerStack-FHIRServerClusterC4EE8AC0-00Vo19v9bvc5", { "label": "TaskCount", "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Task Count",
                "stat": "SampleCount",
                "period": 60
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 128,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "APIServiceInfrastructureStack-APIServiceFargateServiceB310B9BA-UVQnWS50I0Bk", "ClusterName", "APIServiceInfrastructureStack-APIServiceCluster4614AF9B-RH7YLj5zWBvG", { "color": "#1f77b4", "region": "us-west-1", "label": "Task count" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Task Count",
                "stat": "SampleCount",
                "period": 60
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 30,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "APIInfrastructureStack-APIFargateService785A4622-fkussZts8xsF", "ClusterName", "APIInfrastructureStack-APICluster381F6E68-v0y03IsPXhdE", { "color": "#1f77b4", "region": "us-west-1", "label": "Task count" } ],
                    [ "...", "APIInfrastructureStack-APIFargateServiceAlbService1982B8ED-lHbszm7GZIg5", ".", ".", { "color": "#1f77b4", "region": "us-west-1", "label": "Task count" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Task Count",
                "stat": "SampleCount",
                "period": 60
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 74,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "ACUUtilization", "DBClusterIdentifier", "fhir-server", { "yAxis": "left", "region": "us-west-1", "color": "#d62728" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "DB - ACU Utilization",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "label": "ACU Utilization >= 80%",
                            "value": 80
                        }
                    ]
                }
            }
        },
        {
            "height": 8,
            "width": 6,
            "y": 48,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "ACUUtilization", "DBClusterIdentifier", "api-cluster", { "yAxis": "left", "region": "us-west-1", "color": "#d62728" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "API DB - ACU Utilization",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "label": "ACU Utilization >= 80%",
                            "value": 80
                        }
                    ]
                }
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 92,
            "x": 14,
            "type": "log",
            "properties": {
                "query": "SOURCE '/aws/ecs/containerinsights/APIInfrastructureStack-FHIRConverterCluster3ED284AD-6lmkKWgYr3oi/performance' | fields\n\n  CpuUtilized / CpuReserved * 100 as CpuUtilizationPercentage,\n\n  MemoryUtilized / MemoryReserved * 100 as MemoryUtilizationPercentage\n\n| filter Type=\"Task\"\n| stats avg(CpuUtilizationPercentage) as CpuAvgPct, avg(MemoryUtilizationPercentage) as MemAvgPct, @timestamp by TaskId, bin(1m) as When\n| sort When desc, TaskId\n| display CpuAvgPct, MemAvgPct, When, TaskId\n",
                "region": "us-west-1",
                "stacked": false,
                "title": "containerinsights/FHIRConverterCluster",
                "view": "table"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 66,
            "x": 14,
            "type": "log",
            "properties": {
                "query": "SOURCE '/aws/ecs/containerinsights/FHIRServerStack-FHIRServerClusterC4EE8AC0-00Vo19v9bvc5/performance' | fields\n\n\n\n  CpuUtilized / CpuReserved * 100 as CpuUtilizationPercentage,\n\n\n\n  MemoryUtilized / MemoryReserved * 100 as MemoryUtilizationPercentage\n\n\n\n| filter Type=\"Task\"\n| stats avg(CpuUtilizationPercentage) as CpuAvgPct, avg(MemoryUtilizationPercentage) as MemAvgPct, @timestamp by TaskId, bin(1m) as When\n| sort When desc, TaskId\n| display CpuAvgPct, MemAvgPct, When, TaskId\n\n\n\n\n#fields\n#  CpuUtilized / CpuReserved * 100 as CpuUtilizationPercentage,\n#  MemoryUtilized / MemoryReserved * 100 as MemoryUtilizationPercentage\n#| filter Type=\"Task\"\n#| stats avg(CpuUtilizationPercentage) as CpuAvgPct, avg(MemoryUtilizationPercentage) as MemAvgPct by TaskId\n",
                "region": "us-west-1",
                "stacked": false,
                "title": "containerinsights/FHIRServerCluster",
                "view": "table"
            }
        },
        {
            "height": 9,
            "width": 8,
            "y": 138,
            "x": 8,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/SQS", "NumberOfMessagesReceived", "QueueName", "FHIRConverterQueue", { "region": "us-west-1", "color": "#ff7f0e" } ],
                    [ "...", "FHIRConverter2Queue", { "yAxis": "left", "region": "us-west-1", "color": "#ff7f0e" } ],
                    [ "...", "FHIRConverterDLQ", { "yAxis": "right", "region": "us-west-1", "color": "#ffbb78" } ],
                    [ "...", "FHIRConverter2DLQ", { "yAxis": "right", "region": "us-west-1", "color": "#ffbb78" } ],
                    [ "...", "PatientDataConsolidatorQueue.fifo", { "yAxis": "left", "region": "us-west-1", "color": "#1f77b4" } ],
                    [ "...", "PatientDataConsolidatorDLQ.fifo", { "yAxis": "right", "region": "us-west-1", "color": "#aec7e8" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Sum",
                "period": 60,
                "title": "FHIR Queues - Messages Received"
            }
        },
        {
            "height": 9,
            "width": 12,
            "y": 158,
            "x": 12,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "Metriport", "Memory total", "Service", "FHIRServerLambda", { "region": "us-west-1" } ],
                    [ "Metriport", "Memory total", "Service", "FHIRConverterLambda", { "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Lambdas memory",
                "stat": "Maximum",
                "period": 300,
                "yAxis": {
                    "left": {
                        "showUnits": false,
                        "label": "Memory (MB)"
                    }
                }
            }
        },
        {
            "height": 9,
            "width": 12,
            "y": 149,
            "x": 12,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Lambda", "Duration", "FunctionName", "APIInfrastructureStack-LogRetentionaae0aa3c5b4d4f8-VRsrETAUdpuk" ],
                    [ "...", "APIServiceGenerateKeyLambda" ],
                    [ "...", "APIServiceRevokeKeyLambda" ],
                    [ "...", "APIServiceStripeLambdaLambda" ],
                    [ "...", "AppointmentPollingAthenaCatchUpLambda" ],
                    [ "...", "AppointmentPollingAthenaLambda" ],
                    [ "...", "BulkUrlSigningLambda" ],
                    [ "...", "CCDAOpenSearchLambda" ],
                    [ "...", "CdaToVisualizationLambda_v2" ],
                    [ "...", "CommonWellDocContributionLambda" ],
                    [ "...", "DocumentDownloaderLambda_v2" ],
                    [ "...", "DocumentUploaderLambda" ],
                    [ "...", "EhrJwtAuthAthenaLambda" ],
                    [ "...", "EhrOauth2AuthAthenaLambda" ],
                    [ "...", "FHIRConverter2Lambda" ],
                    [ ".", "PostRuntimeExtensionsDuration", ".", "FhirToBundleLambda" ],
                    [ ".", "Duration", ".", "." ],
                    [ "...", "FhirToCdaConverterLambda" ],
                    [ "...", "FhirToMedicalRecordLambda" ],
                    [ ".", "PostRuntimeExtensionsDuration", ".", "." ],
                    [ ".", "Duration", ".", "IHEGatewayV2OutboundDocumentQueryLambda" ],
                    [ "...", "IHEGatewayV2OutboundDocumentRetrievalLambda" ],
                    [ "...", "IHEGatewayV2OutboundPatientDiscoveryLambda" ],
                    [ "...", "IHEInboundDocumentQueryV2Lambda" ],
                    [ "...", "IHEInboundDocumentRetrievalV2Lambda" ],
                    [ "...", "IHEInboundPatientDiscoveryV2Lambda" ],
                    [ "...", "JwtAuthLambda" ],
                    [ "...", "PollOutboundDocumentQueryLambda" ],
                    [ "...", "PollOutboundDocumentRetrievalLambda" ],
                    [ "...", "PollOutboundPatientDiscoveryLambda" ],
                    [ "...", "PropelAuthWebhookLambdaLambda" ],
                    [ "...", "ScheduledAPIQuotaCheckerLambda" ],
                    [ "...", "ScheduledCqDirectoryRebuilderLambda" ],
                    [ "...", "ScheduledDBMaintenanceLambda" ],
                    [ "...", "ScheduledDocumentQueryCheckerLambda" ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Lambdas Duration",
                "stat": "Maximum",
                "period": 300,
                "yAxis": {
                    "left": {
                        "label": "millis",
                        "showUnits": false
                    },
                    "right": {
                        "label": "millis",
                        "showUnits": false
                    }
                }
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 82,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "DatabaseConnections", "DBClusterIdentifier", "fhir-server" ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 60,
                "title": "FHIR DB - Connections",
                "liveData": false
            }
        },
        {
            "height": 8,
            "width": 8,
            "y": 38,
            "x": 16,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ApplicationELB", "RequestCount", "LoadBalancer", "app/APIInf-APIFa-Ad0ZjbBOQg4I/90128f3f5a57e5a7", { "label": "Total requests", "region": "us-west-1" } ],
                    [ ".", "TargetResponseTime", ".", ".", { "label": "Response time", "region": "us-west-1", "yAxis": "right", "color": "#2ca02c", "stat": "Maximum" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Sum",
                "period": 300,
                "title": "ALB requests vs. resp time"
            }
        },
        {
            "height": 8,
            "width": 8,
            "y": 56,
            "x": 16,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "DatabaseConnections", "DBClusterIdentifier", "api-cluster", { "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 60,
                "title": "API DB - Connections",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "label": "MAX CONNECTIONS (based on max ACUs)",
                            "value": 3360
                        }
                    ]
                }
            }
        },
        {
            "height": 8,
            "width": 7,
            "y": 118,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ES", "SearchableDocuments", "DomainName", "ccdaopensearch-domain", "ClientId", "463519787594", { "yAxis": "left", "region": "us-west-1" } ],
                    [ ".", "FreeStorageSpace", ".", ".", ".", ".", { "yAxis": "right", "stat": "Minimum", "region": "us-west-1" } ],
                    [ "...", { "yAxis": "right", "stat": "Maximum", "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 60,
                "title": "OpenSearch - Storage",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "label": "Minimum Storage",
                            "value": 10000,
                            "yAxis": "right"
                        }
                    ]
                }
            }
        },
        {
            "height": 8,
            "width": 7,
            "y": 110,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ES", "CPUUtilization", "DomainName", "ccdaopensearch-domain", "ClientId", "463519787594", { "label": "Nodes CPU", "region": "us-west-1" } ],
                    [ ".", "MasterCPUUtilization", ".", ".", ".", ".", { "label": "Master CPU", "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Maximum",
                "period": 300,
                "title": "OpenSearch - CPU",
                "liveData": false
            }
        },
        {
            "height": 8,
            "width": 7,
            "y": 110,
            "x": 7,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ES", "JVMMemoryPressure", "DomainName", "ccdaopensearch-domain", "ClientId", "463519787594", { "yAxis": "left", "region": "us-west-1", "label": "Nodes JVMMemoryPressure" } ],
                    [ ".", "MasterJVMMemoryPressure", ".", ".", ".", ".", { "yAxis": "left", "region": "us-west-1", "label": "Master JVMMemoryPressure" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Maximum",
                "period": 300,
                "title": "OpenSearch - Memory",
                "liveData": false
            }
        },
        {
            "height": 8,
            "width": 7,
            "y": 118,
            "x": 7,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ES", "SearchLatency", "DomainName", "ccdaopensearch-domain", "ClientId", "463519787594", { "region": "us-west-1" } ],
                    [ ".", "ReadLatency", ".", ".", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "IndexingLatency", ".", ".", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "WriteLatency", ".", ".", ".", ".", { "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Maximum",
                "period": 60,
                "title": "OpenSearch - Latency",
                "liveData": false,
                "annotations": {
                    "horizontal": [
                        {
                            "label": "Max latency",
                            "value": 300
                        }
                    ]
                }
            }
        },
        {
            "height": 8,
            "width": 7,
            "y": 110,
            "x": 14,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ES", "2xx", "DomainName", "ccdaopensearch-domain", "ClientId", "463519787594", { "region": "us-west-1" } ],
                    [ ".", "5xx", ".", ".", ".", ".", { "region": "us-west-1", "color": "#d62728" } ],
                    [ ".", "3xx", ".", ".", ".", ".", { "region": "us-west-1", "color": "#ff7f0e" } ],
                    [ ".", "SearchRate", ".", ".", ".", ".", { "region": "us-west-1", "yAxis": "right", "color": "#2ca02c" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Sum",
                "period": 60,
                "title": "OpenSearch - Searches",
                "liveData": false
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 30,
            "x": 14,
            "type": "log",
            "properties": {
                "query": "SOURCE '/aws/ecs/containerinsights/APIInfrastructureStack-APICluster381F6E68-v0y03IsPXhdE/performance' | stats avg(MemoryUtilized) by bin (1m) as period, TaskId\n| filter Type = \"Task\" | sort period desc, TaskId |  limit 10",
                "region": "us-west-1",
                "title": "API Server - Memory by TaskId",
                "view": "table"
            }
        },
        {
            "height": 9,
            "width": 12,
            "y": 169,
            "x": 12,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ApiGateway", "Count", "ApiName", "api", { "stat": "SampleCount", "region": "us-west-1" } ],
                    [ ".", "Latency", ".", ".", { "yAxis": "right", "region": "us-west-1", "label": "Latency - Avg", "stat": "Average" } ],
                    [ "...", { "yAxis": "right", "region": "us-west-1", "color": "#2ca02c", "label": "Latency - P99" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "p99",
                "period": 300,
                "title": "API Gateway Requests vs. Latency"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 126,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# Internal/Admin\n",
                "background": "solid"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 46,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# OSS DB\n",
                "background": "solid"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 10,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# Bedrock",
                "background": "solid"
            }
        },
        {
            "height": 4,
            "width": 6,
            "y": 2,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Lambda", "Duration", "FunctionName", "FhirToMedicalRecordLambda", { "region": "us-west-1", "stat": "Average", "label": "Duration Average" } ],
                    [ "...", { "region": "us-west-1", "label": "Duration p99" } ]
                ],
                "sparkline": false,
                "view": "singleValue",
                "region": "us-west-1",
                "stat": "p99",
                "period": 300,
                "title": "MR generation",
                "start": "-PT168H",
                "end": "P0D",
                "setPeriodToTimeRange": true,
                "trend": false
            }
        },
        {
            "height": 4,
            "width": 3,
            "y": 2,
            "x": 6,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Lambda", "Duration", "FunctionName", "FHIRConverter2Lambda", { "region": "us-west-1", "label": "Duration p99" } ]
                ],
                "sparkline": false,
                "view": "singleValue",
                "region": "us-west-1",
                "stat": "p99",
                "period": 300,
                "title": "FHIR Conversion",
                "start": "-PT168H",
                "end": "P0D"
            }
        },
        {
            "height": 8,
            "width": 6,
            "y": 56,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/RDS", "ACUUtilization", "Role", "READER", "DBClusterIdentifier", "api-cluster", { "region": "us-west-1" } ],
                    [ "...", "WRITER", ".", ".", { "yAxis": "right", "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "API DB - ACU reader/writer",
                "liveData": false
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 92,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "APIInfrastructureStack-FHIRConverterFargateService8CA04E0D-eZf2v9mn6vvJ", "ClusterName", "APIInfrastructureStack-FHIRConverterCluster3ED284AD-6lmkKWgYr3oi", { "color": "#1f77b4", "region": "us-west-1", "label": "Task count" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Task Count",
                "stat": "SampleCount",
                "period": 60
            }
        },
        {
            "height": 8,
            "width": 8,
            "y": 38,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ApplicationELB", "HTTPCode_Target_2XX_Count", "LoadBalancer", "app/APIInf-APIFa-Ad0ZjbBOQg4I/90128f3f5a57e5a7", { "region": "us-west-1", "label": "2XX_Count" } ],
                    [ ".", "HTTPCode_Target_4XX_Count", ".", ".", { "yAxis": "right", "region": "us-west-1", "label": "4XX_Count" } ],
                    [ ".", "HTTPCode_Target_5XX_Count", ".", ".", { "yAxis": "right", "region": "us-west-1", "label": "5XX_Count", "color": "#d62728" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Sum",
                "period": 300,
                "title": "API request count"
            }
        },
        {
            "height": 8,
            "width": 8,
            "y": 38,
            "x": 8,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ApplicationELB", "HTTPCode_ELB_4XX_Count", "LoadBalancer", "app/APIInf-APIFa-Ad0ZjbBOQg4I/90128f3f5a57e5a7", { "region": "us-west-1", "color": "#ff7f0e", "label": "4XX_Count" } ],
                    [ ".", "HTTPCode_ELB_5XX_Count", ".", ".", { "yAxis": "right", "region": "us-west-1", "color": "#d62728", "label": "5XX_Count" } ],
                    [ ".", "HTTPCode_ELB_504_Count", ".", ".", { "yAxis": "right", "region": "us-west-1", "color": "#9467bd", "label": "504_Count" } ],
                    [ ".", "HTTPCode_ELB_502_Count", ".", ".", { "yAxis": "right", "region": "us-west-1", "color": "#e377c2", "label": "502_Count" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Sum",
                "period": 300,
                "title": "ALB error responses"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 2,
            "x": 13,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "Metriport", "Patient Creates" ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Patient Creates",
                "period": 300,
                "stat": "SampleCount"
            }
        },
        {
            "height": 4,
            "width": 4,
            "y": 2,
            "x": 9,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "Metriport", "Patient Creates", { "region": "us-west-1", "label": "Patient Creates", "id": "m1" } ]
                ],
                "view": "singleValue",
                "stacked": false,
                "region": "us-west-1",
                "title": "Patient Creates",
                "period": 300,
                "stat": "SampleCount",
                "setPeriodToTimeRange": true,
                "sparkline": false,
                "trend": false,
                "singleValueFullPrecision": true,
                "start": "-PT24H",
                "end": "P0D"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 147,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# Lambdas\n",
                "background": "solid"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 167,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# API Gateway\n",
                "background": "solid"
            }
        },
        {
            "height": 9,
            "width": 8,
            "y": 138,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/SQS", "ApproximateAgeOfOldestMessage", "QueueName", "FHIRConverterQueue", { "region": "us-west-1", "color": "#ff7f0e", "label": "Queue ~AgeOfOldest" } ],
                    [ "...", "FHIRConverter2Queue", { "region": "us-west-1", "label": "Queue2 ~AgeOfOldest" } ],
                    [ ".", "ApproximateNumberOfMessagesVisible", ".", "FHIRConverterQueue", { "region": "us-west-1", "color": "#1f77b4", "yAxis": "right", "label": "Queue #Visible" } ],
                    [ "...", "FHIRConverter2Queue", { "region": "us-west-1", "color": "#1f77b4", "yAxis": "right", "label": "Queue2 #Visible" } ],
                    [ "...", "FHIRConverterDLQ", { "region": "us-west-1", "color": "#aec7e8", "yAxis": "right", "label": "DLQ #Visible" } ],
                    [ "...", "FHIRConverter2DLQ", { "region": "us-west-1", "color": "#aec7e8", "yAxis": "right", "label": "DLQ2 #Visible" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Maximum",
                "period": 60,
                "title": "FHIR Converter"
            }
        },
        {
            "height": 9,
            "width": 8,
            "y": 138,
            "x": 16,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/SQS", "ApproximateAgeOfOldestMessage", "QueueName", "CCDAOpenSearchQueue", { "region": "us-west-1", "color": "#ff7f0e", "label": "Queue ~AgeOfOldest" } ],
                    [ ".", "ApproximateNumberOfMessagesVisible", ".", ".", { "region": "us-west-1", "color": "#1f77b4", "yAxis": "right", "label": "Queue #Visible" } ],
                    [ "...", "CCDAOpenSearchDLQ", { "region": "us-west-1", "color": "#aec7e8", "yAxis": "right", "label": "DLQ #Visible" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Maximum",
                "period": 60,
                "title": "CCDA OpenSearch"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 74,
            "x": 14,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/ApplicationELB", "RequestCount", "LoadBalancer", "app/FHIRS-FHIRS-5XE17T7B1DKI/2e7fc24e49e5b317", { "label": "Total requests", "region": "us-west-1" } ],
                    [ ".", "TargetResponseTime", ".", ".", { "label": "Target response time", "region": "us-west-1", "yAxis": "right", "color": "#2ca02c" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Sum",
                "period": 300,
                "title": "ALB requests vs. resp time"
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 100,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "Metriport", "Memory total", "Service", "FHIRConverter2Lambda", { "yAxis": "right", "region": "us-west-1" } ],
                    [ ".", "conversion", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "postProcess", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "download", ".", ".", { "region": "us-west-1" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "Internal metrics"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 12,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Bedrock", "Invocations", { "region": "us-west-2", "yAxis": "left", "stat": "SampleCount", "label": "Invocations us-west-2" } ],
                    [ "...", { "region": "us-east-1", "yAxis": "left", "stat": "SampleCount", "label": "Invocations us-east-1" } ],
                    [ "...", { "region": "us-east-2", "yAxis": "left", "stat": "SampleCount", "label": "Invocations us-east-2" } ],
                    [ ".", "InputTokenCount", { "region": "us-west-2", "yAxis": "right", "label": "Input tokens us-west-2" } ],
                    [ "...", { "region": "us-east-1", "yAxis": "right", "label": "Input tokens us-east-1" } ],
                    [ "...", { "region": "us-east-2", "yAxis": "right", "label": "Input tokens us-east-2" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Invocations and Tokens",
                "period": 60,
                "stat": "Sum"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 100,
            "x": 14,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "Metriport", "setup", "Service", "FhirToMedicalRecordLambda", { "region": "us-west-1" } ],
                    [ ".", "htmlConversion", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "pdfConversion", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "pdfUpload", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "total", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "setup", ".", "FhirToMedicalRecord2Lambda", { "region": "us-west-1", "yAxis": "left", "color": "#aec7e8" } ],
                    [ ".", "htmlConversion", ".", ".", { "region": "us-west-1", "yAxis": "left", "color": "#ffbb78" } ],
                    [ ".", "pdfConversion", ".", ".", { "region": "us-west-1", "yAxis": "left", "color": "#98df8a" } ],
                    [ ".", "pdfUpload", ".", ".", { "region": "us-west-1", "yAxis": "left", "color": "#ff9896" } ],
                    [ ".", "total", ".", ".", { "region": "us-west-1", "yAxis": "left", "color": "#c5b0d5" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 60,
                "title": "FhirToMr new/old - Duration"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 100,
            "x": 4,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "Metriport", "memPreSetup", "Service", "FhirToMedicalRecordLambda", { "yAxis": "left", "region": "us-west-1" } ],
                    [ ".", "memPostSetup", ".", ".", { "yAxis": "left", "region": "us-west-1" } ],
                    [ ".", "memPostHtml", ".", ".", { "yAxis": "left", "region": "us-west-1" } ],
                    [ ".", "memPostPdf", ".", ".", { "region": "us-west-1" } ],
                    [ ".", "memPreSetup", ".", "FhirToMedicalRecord2Lambda", { "yAxis": "left", "region": "us-west-1", "color": "#aec7e8" } ],
                    [ ".", "memPostSetup", ".", ".", { "yAxis": "left", "region": "us-west-1", "color": "#ffbb78" } ],
                    [ ".", "memPostHtml", ".", ".", { "yAxis": "left", "region": "us-west-1", "color": "#98df8a" } ],
                    [ ".", "memPostPdf", ".", ".", { "yAxis": "left", "region": "us-west-1", "color": "#ff9896" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "stat": "Average",
                "period": 300,
                "title": "FhirToMr new/old - MEM"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 12,
            "x": 14,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Bedrock", "InvocationServerErrors", { "region": "us-west-2", "label": "Server us-west-2" } ],
                    [ "...", { "region": "us-east-1", "label": "Server us-east-1" } ],
                    [ "...", { "region": "us-east-2", "label": "Server us-east-2" } ],
                    [ ".", "InvocationClientErrors", { "region": "us-west-2", "yAxis": "right", "label": "Client us-west-2" } ],
                    [ "...", { "region": "us-east-1", "yAxis": "right", "label": "Client us-east-1" } ],
                    [ "...", { "region": "us-east-2", "yAxis": "right", "label": "Client us-east-2" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Errors",
                "period": 60,
                "stat": "SampleCount"
            }
        },
        {
            "height": 2,
            "width": 24,
            "y": 28,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# OSS API\n",
                "background": "solid"
            }
        },
        {
            "height": 8,
            "width": 4,
            "y": 12,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/Bedrock", "InvocationLatency", { "region": "us-west-2", "color": "#d62728" } ],
                    [ "...", { "region": "us-east-1" } ],
                    [ "...", { "region": "us-east-2" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Latency",
                "period": 60,
                "stat": "Sum"
            }
        },
        {
            "height": 8,
            "width": 10,
            "y": 20,
            "x": 14,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ { "expression": "m1+m2+m3", "label": "Errors", "id": "e1", "region": "us-west-1", "yAxis": "right", "color": "#d62728" } ],
                    [ "AWS/Bedrock", "InvocationServerErrors", { "region": "us-west-2", "label": "Server us-west-2", "id": "m1", "visible": false } ],
                    [ "...", { "region": "us-east-1", "label": "Server us-east-1", "id": "m2", "visible": false } ],
                    [ "...", { "region": "us-east-2", "label": "Server us-east-2", "id": "m3", "visible": false } ],
                    [ { "expression": "m4+m5+m6", "label": "Invocations", "id": "e2", "region": "us-west-1", "yAxis": "left", "color": "#1f77b4" } ],
                    [ "AWS/Bedrock", "Invocations", { "region": "us-west-2", "id": "m4", "visible": false } ],
                    [ "...", { "region": "us-east-1", "id": "m5", "visible": false } ],
                    [ "...", { "region": "us-east-2", "id": "m6", "visible": false } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "us-west-1",
                "title": "Errors x Invocations",
                "period": 60,
                "stat": "SampleCount"
            }
        }
    ]
}