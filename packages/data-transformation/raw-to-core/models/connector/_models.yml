version: 2

models:
  - name: connector__condition
    columns:
      - name: patient_id
        tests:
          - relationships:
              to: ref('connector__patient')
              field: patient_id
              config:
                severity: error
  - name: connector__encounter
    columns:
      - name: patient_id
        tests:
          - relationships:
              to: ref('connector__patient')
              field: patient_id
              config:
                severity: error
  - name: connector__immunization
    columns:
      - name: patient_id
        tests:
          - relationships:
              to: ref('connector__patient')
              field: patient_id
              config:
                severity: error
  - name: connector__lab_result
    columns:
      - name: patient_id
        tests:
          - relationships:
              to: ref('connector__patient')
              field: patient_id
              config:
                severity: error
  - name: connector__location
  - name: connector__medication
    columns:
      - name: patient_id
        tests:
          - relationships:
              to: ref('connector__patient')
              field: patient_id
              config:
                severity: error
  - name: connector__observation
    columns:
      - name: patient_id
        tests:
          - relationships:
              to: ref('connector__patient')
              field: patient_id
              config:
                severity: error
  - name: connector__patient
  - name: connector__practitioner
  - name: connector__procedure
    columns:
      - name: patient_id
        tests:
          - relationships:
              to: ref('connector__patient')
              field: patient_id
              config:
                severity: error
